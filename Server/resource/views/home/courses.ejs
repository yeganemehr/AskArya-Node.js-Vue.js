<header class="jumbotron hero-spacer">
    <h1>
        <%= __('ourcourses') %>
    </h1>
    <p>
        <%= __('ourcoursesdescription') %>
    </p>
</header>

<%

  let { search , type , order , category } = req.query; 

%>


<form action="/courses" method="GET">

    <% if(search) { %>
    <div class="form-group col-md-3">
        <input type="hidden" name="search" value="<%= search %>">
        <span>عبارت جستجو شده :
            <%= search %> <a href="/courses?<%= type ? 'type=' + type : '' %><%= order ? '&order=1' : '' %>" class="btn btn-sm btn-dark">حذف</a></span>
    </div>
    <% } %>


    <div class="row">
        <div class="form-group col-md-2">
            <select name="type" class="form-control">
                <option value="all">همه دوره ها</option>
                <option value="vip" <%=type==='vip' ? 'selected' : '' %> >اعضای ویژه</option>
                <option value="cash" <%=type==='cash' ? 'selected' : '' %> >نقدی</option>
                <option value="free" <%=type==='free' ? 'selected' : '' %> >رایگان</option>
            </select>
        </div>

        <div class="form-group col-md-2">
            <select name="category" class="form-control">
                <option value="all">همه دسته ها</option>
                <% categories.forEach(cate => { %>
                <option value="<%= cate.slug %>" <%=cate.slug===category ? 'selected' : '' %> >
                    <%= cate.name %>
                </option>
                <% }) %>
            </select>
        </div>

        <div class="form-group col-md-6">
            <div class="col-md-3">
                <button class="btn btn-danger" type="submit">فیلتر</button>
            </div>
            <label class="checkbox-inline pt-2 col-md-3">
                <input type="checkbox" name="order" value="1" class="ml-2" <%=order==='1' ? 'checked' : '' %>>از اول به
                آخر
            </label>
        </div>
    </div>




</form>

<hr>

<% if(courses.length) { %>
<div class="row">
    <% courses.forEach(course => { %>
    <div class="col-lg-3 col-md-6 col-sm-12">
        <div class="card">
            <img class="card-img-top" src="<%= course.thumb %>" alt="<%= course.title %>">
            <div class="card-body">
                <h3><a href="<%= course.path() %>">
                        <%= course.title %></a></h3>
                <p class="card-text">
                    <%= course.body.substr(0,100) %>
                </p>
                <a href="<%= course.path() %>" class="btn btn-primary btn-sm">اطلاعات بیشتر</a>
            </div>
            <div class="card-footer text-muted">
                <%= course.viewCount %>
                <%= __('courseviews') %>
            </div>
        </div>
    </div>
    <% }) %>
</div>
<% } else { %>
<div class="row">
    <p>دوره ای یافت نشد</p>
</div>
<%} %>


<%- include(viewPath('layouts/pagination') ,{ pagination : courses}) %>